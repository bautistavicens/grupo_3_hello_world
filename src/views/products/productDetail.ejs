<!DOCTYPE html>
<html lang="es" class="html-home">
  <%- include('../partials/head') %>
  <body>
    <%- include('../partials/header') %>
    <%- include('../partials/mobileNavBar') %>
    <main class="main-product-detail">
      <!--Producto-->
      <form class="product-container">
        <article class="product-subcontainer-1">
          <!--Brand name-->
          <h1 class="main-title"> <%= product.productBrand.name %> </h2>
          <!--Image-->
          <img src="/images/products/<%= product.productImages[0].image_path %>" class="product-image" alt="Zapato"/>
        </article>

        <article class="product-subcontainer-2">
          <!--Price & Discount - section-->
          <section class="price-discount-section">
            <!--If product has %Off-->
            <% if (product.discount_percentage> 0) { %>
              <div>
                <!--Price without discount-->
                <p class="price"><del> $<%= product.price %> </del></p>
            
                <!--%Off-->
                <p class="discount"> <%= product.discount_percentage %>% Off </p>
              </div>
              <!--Price with discount-->
              <p class="price-with-discount"> $<%= product.price - ((product.price * product.discount_percentage) / 100) %> </p>
            
              <!--If not-->
              <% } else { %>
                <!--Price-->
                <p class="price"> $<%= product.price %> </p>
              <% } %>
          </section>
          <!--Sizes - section-->
          <section>
            <h4 class="sizes-subtitle"> Talles </h4>
            <select name="producto-detalle-talles" id="select-cantidad">
              <!--forEach -> Sizes -->
              <optgroup label="EUR"></optgroup>
              <% product.Sizes.forEach(size => { %>
                <% if ( size.type  == "EUR") { %>
                  <option value= <%= size.id %> > <%= size.type  + " " + size.value %> </option>
                  <% } %>       
              <% }) %>
              <optgroup label="CM"></optgroup>
              <% product.Sizes.forEach(size => { %>
                <% if ( size.type  == "CM") { %>
                  <option value= <%= size.id %> > <%= size.type  + " " + size.value %> </option>
                <% } %>      
              <% }) %>
            </select>
          </section>
          <!--Color - section-->
          <section class="color-section">
            <p class="color"> <%= product.color %> </p>
          </section>
          <section class="buttons-section">
            <hr class="producto-detalle-linea">
            <button type="submit" class="add-product-btn">Agregar al carrito</button>
          </section>
        </article>
        <article class="product-subcontainer-3">
          <!--Description - section-->
          <section class="description-section">
            <p><%= product.description %> </p>
          </section>
        </article>
      </form>

      <!-- Productos relacionados -->
      <!--<h5 class="product-detail-productos-relacionados-title">PRODUCTOS RELACIONADOS</h5>
      <center>
        <hr class="product-detail-destacados-hr"> 
      </center>
      <section class="productos-relacionados-container">
        <div class="child-container">
          Solucionar problema <a> 
          <% relationatedProducts.forEach(element => { %>
            <a href="/productos/<%= element.id %>">
            <article class="flex-item">
              <img src="/images/products/<%= element.productImages[0].image_path  %>" alt="Producto" />
              <div class="descripcion-container">
                <p> <%= element.productBrand.name %> </p>
                <p>$ <%= element.price %> </p>
              </div>
            </article>
          </a>            
          <% }); %> 
        </div>
    </section>-->
    <% if (isAdmin == true) { %>
      <div id="product-editBtn-container">
        <a href="/productos/<%= product.id %>/editar"  class="btn-link">
          <i class="fa-solid fa-pen"></i>
        </a>
      </div>
    <% } %>
    </main>
    <%- include('../partials/footerPrincipal') %>
  </body>
</html>
